<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./js/myScript.js" defer></script>
    <title>Odin's Project Rock, Paper and Scissors</title>
</head>
<body>
    <div class="container">
        <button id="ro">Rock</button>
        <button id="pa">Paper</button>
        <button id="sci">Scissors</button>
    </div>
    <script>
        function getComputerChoiceNew(rps) {
                rps = Math.floor(Math.random() * 3);
                switch (rps) {
                    case 0:
                        return "R";
                        break;
                    case 1:
                        return "P";
                        break;
                    case 2:
                        return "S";
                        break;
                }
            }


            function playRoundNew(psel, csel) {
                let pWin;
                if ((psel == "ro") && (csel == "P")) {
                    pWin = false;
                }
                else if ((psel == "ro") && (csel == "S")) {
                    pWin = true;
                }
                else if ((psel == "pa") && (csel == "R")) {
                    pWin = true;
                }
                else if ((psel == "pa") && (csel == "S")) {
                    pWin = false;
                }
                else if ((psel == "sci") && (csel == "P")) {
                    pWin = true;
                }
                else if ((psel == "sci") && (csel == "R")) {
                    pWin = false;
                }
                /*else {
                    return "TIES";               
                }
                */
                return pWin;
            }

            function gameNew() {

                let pscore;
                let cscore;

                if (true) {
                    pscore += 1;
                    console.log(`PS: ${pscore}`);
                    console.log(`CS: ${cscore}`);
                }

                return pscore;

                if (false) {
                    cscore += 1;
                    console.log(`PS: ${pscore}`);
                    console.log(`CS: ${cscore}`);
                }

                return cscore;

            }

            const btns = document.querySelectorAll('button');
            const container = document.querySelector('.container');
            const result = document.createElement('div');

            let sumPScore = 0;
            let sumCScore = 0;

            btns.forEach((btn) => {
                btn.addEventListener('click', () => {
                    player = btn.id;
                    comp = getComputerChoiceNew();

                    if(playRoundNew(player, comp)) {
                        sumPScore += 1;
                        console.log(`PS: ${sumPScore}`);
                        console.log(`CS: ${sumCScore}`);
                    }
                    else {
                        sumCScore += 1;
                        console.log(`PS: ${sumPScore}`);
                        console.log(`CS: ${sumCScore}`);
                    }

                    if (sumPScore == 5) {  
                        console.log(`Player win`);                      
                        result.textContent = 'You win';
                        container.appendChild(result);

                    }
                    else if (sumCScore == 5) {
                        console.log(`Computer win`);                      
                        result.textContent = 'You loses';
                        container.appendChild(result);
                    }
                });
                
            });

            
            

        </script>
</body>
</html>